---
#"Description" : "Ansible Playbook to Configure a Secondary HDD & Apache

- name: Configure Secondary HDD & Configure Docker 
  hosts: localhost
  gather_facts: False
  tasks:
  become: true
  remote_user: ubuntu
  gather_facts: false
#  sudo: yes
  tasks:    
    - name: partition new disk
      shell: /bin/echo -e "n\np\n1\n\n\nw" | sudo fdisk /dev/xvdh

    - filesystem:
        fstype: ext4
        dev: /dev/xvdh1
#        opts: -cc

    - name: Creates Apache Mount directory
      file: 
        path: /mnt/docker 
        state: directory
        mode: "u=rwx,g=wx,o=rwx"

    - name: Mount New File System
      shell: sudo mount /dev/xvdh1 /mnt/docker 

    - name: Make Mount Point Permanent
      shell: |
        echo '/dev/xvdh1    /mnt/docker    ext4    defaults    0    1' >> /etc/fstab
      register: WelcomeONAP

    - name: Write Welcome Page
      shell: |
        echo 'Hello AWS World' > /mnt/docker/docker.txt
      register: WelcomeApache

#    - roles:
#        - common 
#        - docker
#        - k8s
#        - helm
#        - oom

    
